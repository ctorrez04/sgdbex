<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"     
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>      
<f:event listener="#{login.logueadoInicial}" type="preRenderView" />
</f:metadata>
    <h:head>
        <title>SGDBEX</title>
        <style type="text/css">
		.ui-widget {
		  font-size: 75% !important;
		}
		.ui-widget .ui-widget {
		  font-size: 100% !important;
		}
	</style>
    </h:head>
    
    <h:body>
    <div id="header">
    	<h:graphicImage url="/images/logo.jpg" width="400" height="80" />
    </div>
    <h:outputStylesheet library="css" name="login.css" />
	<h:outputScript library="js" name="script.js" />
     <div align="center">
     <br/>
     <br/>
     <br/>
     <br/>
     	<h:form>
   		   <p:growl id="growl" sticky="true" showDetail="true" life="3000" />

		   <p:panel id="basic" styleClass="formLogin" header="Autenticaci贸n de Usuarios" >
		   <p:focus context="basic"/>
		     <h:panelGrid id="grid" columns="1" cellpadding="3" >
		    
		     	<h:outputLabel for="usuario" value="Usuario" />
		        <p:inputText id="usuario" value="#{login.usuario}" required="true" label="usuario" />
		 
		        <h:outputLabel for="clave" value="Clave" />
		        <p:password id="clave" value="#{login.clave}" required="true" label="clave"/>
		 			
		        <f:facet name="footer" >
		        	<p:commandButton value="Ingresar" update="growl"  action="#{login.login}" oncomplete="handleComplete(xhr, status, args);"/>
		        	<p:commandButton value="Borrar" type="reset" update="growl" action="#{login.limpiar}" ></p:commandButton>
		        </f:facet>
		     </h:panelGrid>
	       </p:panel>
		</h:form>
 	 </div>
 	 
 	 <p:dialog header="Sesi贸n Expirada" widgetVar="dlg1" modal="true" appendTo="@(body)" closable="false" height="100" style="text-align:center;" resizable="false">
		<h:form>
		<h:panelGrid id="GridDialog" columns="1">
    		<h:outputText value="La sesi贸n ha expirado, por favor inicie sesi贸n nuevamente!" />
    		<br />
    		<p:commandButton value="Ir a login" action="#{menu.SesionExpirada}" oncomplete="redirect()"/>
    	</h:panelGrid>
    	</h:form>
	</p:dialog>
 	 
 	 <script type="text/javascript">
	function handleComplete(xhr, status, args) {
		var isValid = args.isValid;
		if(isValid==null){
			PF('dlg1').show();
		}
	}
	</script>
	
	<script type="text/javascript">  
	function redirect() {
		//var url = 'http://localhost:8080/sgdbex/login.jsf';
		var url = 'http://localhost:8080/sgdbex/Autenticacion';
		window.location.replace(url);
	      }
    </script>
 	 
 	 <style type="text/css">
	.ui-widget {
	font-size: 90%;
				}
	</style>
 	 
    </h:body>
</html>